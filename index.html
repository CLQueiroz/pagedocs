<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, shrink-to-fit=no">
  <link href="assets/images/favicon.png" rel="icon" />
  <title>Docs - API Ingressos</title>

  <!-- Stylesheet
============================== -->
  <!-- Bootstrap -->
  <link rel="stylesheet" type="text/css" href="assets/vendor/bootstrap/css/bootstrap.min.css" />
  <!-- Font Awesome Icon -->
  <link rel="stylesheet" type="text/css" href="assets/vendor/font-awesome/css/all.min.css" />
  <!-- Magnific Popup -->
  <link rel="stylesheet" type="text/css" href="assets/vendor/magnific-popup/magnific-popup.min.css" />
  <!-- Highlight Syntax -->
  <link rel="stylesheet" type="text/css" href="assets/vendor/highlight.js/styles/github.css" />
  <!-- Custom Stylesheet -->
  <link rel="stylesheet" type="text/css" href="assets/css/stylesheet.css" />
</head>

<body data-spy="scroll" data-target=".idocs-navigation" data-offset="125">

  <!-- Preloader -->
  <div class="preloader">
    <div class="lds-ellipsis">
      <div></div>
      <div></div>
      <div></div>
      <div></div>
    </div>
  </div>
  <!-- Preloader End -->

  <!-- Document Wrapper   
=============================== -->
  <div id="main-wrapper">

    <!-- Header
  ============================ -->
    <header id="header" class="sticky-top">
      <!-- Navbar -->
      <nav class="primary-menu navbar navbar-expand-lg navbar-dropdown-dark">
        <div class="container-fluid">
          <!-- Sidebar Toggler -->
          <button id="sidebarCollapse" class="navbar-toggler d-block d-md-none" type="button"><span></span><span
              class="w-75"></span><span></span></button>

          <!-- Logo -->
          <h3>
            Docs API Ingressos
          </h3>
          <span class="text-2 ml-2">v2.0</span>
          <!-- Logo End -->
        </div>
      </nav>
      <!-- Navbar End -->
    </header>
    <!-- Header End -->

    <!-- Content
  ============================ -->
    <div id="content" role="main">

      <!-- Sidebar Navigation
	============================ -->
      <div class="idocs-navigation bg-light">
        <ul class="nav flex-column ">
          <li class="nav-item"><a class="nav-link active" href="#Sobre">Sobre</a></li>
          <li class="nav-item"><a class="nav-link" href="#historico-revisao">Histórico de revisão</a>
          <li class="nav-item"><a class="nav-link" href="#Endpoints">Endpoints</a>
            <ul class="nav flex-column">
              <li class="nav-item"><a class="nav-link" href="#Login">Login</a>
                <ul class="nav flex-column">
                  <li class="nav-item"><a class="nav-link" href="#postlogin">POST /lOGIN</a></li>
                </ul>
              </li>
              <li class="nav-item"><a class="nav-link" href="#Ingressos">Ingressos</a>
                <ul class="nav flex-column">
                  <li class="nav-item"><a class="nav-link" href="#getingressos">GET /ingressos</a></li>
                  <li class="nav-item"><a class="nav-link" href="#postingessos">POST /ingressos</a></li>
                </ul>
              </li>
              <li class="nav-item"><a class="nav-link" href="#Shows">Shows</a>
                <ul class="nav flex-column">
                  <li class="nav-item"><a class="nav-link" href="#getshows">GET /Shows</a></li>
                  <li class="nav-item"><a class="nav-link" href="#getshowsid">GET /Shows/id</a></li>
                  <li class="nav-item"><a class="nav-link" href="#postshows">POST /Shows</a></li>
                  <li class="nav-item"><a class="nav-link" href="#putshows">PUT /Shows/ID</a></li>
                  <li class="nav-item"><a class="nav-link" href="#deleteshows">DELETE /Shows/ID</a></li>
                  <li class="nav-item"><a class="nav-link" href="#getdetalheshowid">GET /DetalheShow/ID</a></li>
                  <li class="nav-item"><a class="nav-link" href="#postdetalheshow">POST /DetalheShow</a></li>
                </ul>
              </li>
              <li class="nav-item"><a class="nav-link" href="#relatorios">Relatórios</a>
                <ul class="nav flex-column">
                  <li class="nav-item"><a class="nav-link" href="#getrelatorios">POST /relatorios</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="nav-item"><a class="nav-link" href="#Tecnologias">Tecnologias Utilizadas</a></li>
          <li class="nav-item"><a class="nav-link" href="#diagramamer">Diagrama MER</a></li>
	  <li class="nav-item"><a class="nav-link" href="#fluxograma">Fluxogramas Macros</a></li>
        </ul>
      </div>

      <!-- Docs Content
	============================ -->
      <div class="idocs-content">
        <div class="container">

          <!-- Getting Started
		============================ -->
          <section id="Sobre">
            <h1>Documentação</h1>
            <h2>Projeto Ingressos API v2.0</h2>
            <p class="lead">API desenvolvida para que seja possível realizar a compra de ingressos do seu show
              favorito.
              Nela o
              desenvolvedor pode
              integrar as informações de compras de ingressos e também realizar cadastros de Ingressos e shows
              diretamente
              pelo seu
              sistema. Também consegue exportar uma listagem/relatório de todas as compras realizadas.</p>
            <hr>
            <div class="row">
              <div class="col-sm-6 col-lg-4">
                <ul class="list-unstyled">
                  <li><strong>Versão:</strong> 2.0</li>
                  <li><strong>Autor:</strong> Caique Queiroz</li>
		  <li><strong>Repositório da documentação:</strong><a href="https://github.com/CLQueiroz/pagedocs" target="_blank"> Github </a></li>
                </ul>
              </div>
              <div class="col-sm-6 col-lg-4">
                <ul class="list-unstyled">
                  <li><strong class="font-weight-700">Criado:</strong> 15 Julho, 2021</li>
                  <li><strong>Atualizado:</strong> 26 Outubro, 2021</li>		  
                </ul>
              </div>
            </div>
          </section>

          <hr class="divider">

          <section id="historico-revisao">
            <h2>Histórico de revisão</h2>
            <h3>Versão 2.0</h3>
            <p class="lead mb-1">Na versão 2.0 da API, foi realizado algumas modificações adicionado controle por autenticação via JWT e adicionado alguns Endpoints, sendo eles: </p>
            <p class="lead mb-5"> <b>Login</b> - <b>Usuários</b> - <b>Tipo Usuários</b> - <b>Ingressos</b> - <b>Shows</b> - <b>Tipo Ingressos</b> - <b>Relatórios</b> </p>
          </section>


          <section id="Endpoints">
            <h3>Versão 1.0</h3>
            <p class="lead mb-5">Na versão 1.0 da API, é disponibilizado 3 endpoints <b>Ingressos</b> - <b>Shows</b> -
              <b>Relatórios</b>
          
          </section>


          <section id="Login">
            <h2>Login</h2>
            <p>No endpoint de Login é possível realizar a autenticação irá gerar um token JWT sendo unico e os dados do usuário logado

            <!-- Róta POST Login-->
            <h4 id="postlogin">POST /Login</h4>
            <p>Para realizar o login precisa ser enviado o e-mail e a senha do usuário no body. </p>
            <pre>
                <code class="html">
            {
              "email": "joasinho@hotmail.com",
              "senha": "11111111111"
            }
                </code>
            </pre>

            <p>Exemplo de retorno:</p>
            <pre>
              <code class="html">
                  {
                    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6IjExMTExMTExMTExIiwianRpIjoiMDczNTIyMTMtNGJiYi00NDFjLWI2NTAtYzFlMGFmNjE0MTNjI
                    iwibmFtZSI6IkNhaXF1ZSBRdWVpcm96Iiwic2lkIjoiNSIsInJvbGUiOiJBZG1pbmlzdHJhZG9yIiwibmJmIjoxNjM1MzgxOTE0LCJleHAiOjE2MzUzODI1MTQsImlhdCI6MTYzNTM4MTkxN
                    CwiaXNzIjoiQXBpSW5ncmVzc29zSXNzdWVyIiwiYXVkIjoiQXBpSW5ncmVzc29zQXVkaWVuY2UifQ.b6ZRlef9nvqIa36SpA3Jrad0wZx91qX-x32bwglnyXI",
                    "usuario": {
                      "id": 5,
                      "nome": "Joãosinho",
                      "email": "joasinho@hotmail.com",
                      "cpf": "11111111111",
                      "tipoUsuario": {
                        "id": 2,
                        "titulo": "Comprador"
                      }
                    }
                  }
              </code>
            </pre>
          </section>



          <section id="Ingressos">
            <h2>Ingressos</h2>
            <p>No endpoint de ingresso é possível comprar e listar as compras realizadas. </p>

            <!-- Róta GET ingresos -->
            <h4 id="getingressos">GET /ingressos </h4>
            <p>Rota protegida ['Administrador', 'Comprador']. Enviar no header Bearer o token JWT. </p>
            <p>Quando usuário for do tipo Administrador, será retornado todos os ingressos comprados, de todos usuários, caso comprador, será retornado somente as compras vinculadas a seu CPF.</p>
            <p>Para visualizar todos os ingressos comprados de todas as pessoas, utilizar o endpoint de
              <b>/ingressos</b> podemos
              visualizar todos os ingressos comprados selecionando o método <b>GET /ingressos </b> será retornado um 200
              de sucesso, com a seguinte estrutura:
            </p>
            <pre>
              <code class="html">
      {
        "id": 1,
        "tituloShow": "Beatles",
        "valor": 299.00,
        "data": "2021-12-30",
        "nome": "Caique Queiroz"
      }
              </code>
            </pre>          
            <!-- Róta POST ingresos -->
            <h4 id="postingessos">POST /ingressos</h4>
            <p>Rota protegida ['Administrador', 'Comprador']. Enviar no header Bearer o token JWT. </p>
            <p>Para Realizar a compra, utilizar o endpoint de /ingressos. No método POST /ingressos enviar o ID do usuário
              e informar o DetalheShowId que contem as informações do show desejado para compra. Será
              realizado as seguintes
              validações.
            </p>
            <ul>
              <li>
                DetalheShowId do show precisa existir na base de dados.
              </li>
              <li>
                Após a compra será atualizado a capacidade do DetalheShow comprado.
              </li>
              <li>
                Não é permitido a compra de um ingresso com capacidade esgotada.
              </li>
            </ul>
            Exemplo de Request:
            <pre>
          <code class="html">
          {
            "detalheShowId": 12,
            "idUsuario": 3
          }
            </code>
          </pre>
            Após validações será retornado um statusCode de 200 compra realizada com sucesso.
          </pre>
          </section>

          <hr class="divider">

          <!-- Endpoint Shows
		============================ -->
          <section id="Shows">
            <h2>Shows</h2>
            <p class="lead">No endpoint de shows é possível cadastrar, excluir, atualizar e listar os shows cadastrados.
            </p>
            <h4 class="mt-5" id="getshows">GET /Shows</h4>
            <p>Rota protegida ['Administrador', 'Comprador']. Enviar no header Bearer o token JWT. </p>
            <p>
              Para visualizar todos os shows disponíveis utilizar o endpoint de /Shows podemos visualizar todos os shows
              disponíveis
              para compra no método GET /shows será retornado um Status 200 com todos os shows cadastrados(Ja existe
              cadastrado uma lista
              com 10 shows disponíveis). Assim como o exemplo a seguir:
            </p>
            <pre>
            <code class="html">
            {
              "id": 62,
              "titulo": "AC DC",
              "data": "2021-10-27T00:00:00",
              "detalheShows": [
                {
                  "id": 477,
                  "capacidade": 121,
                  "valor": 1231,
                  "showDisponivel": true,
                    "tipoIngresso": {
                      "id": 145,
                      "titulo": "CAMAROTE"
                    }
                  }
                ]
            },
              </code>
            </pre>            

            <h4 class="mt-5" id="getshowsid">GET /Shows/{ID}</h4>
            <p>Rota protegida ['Administrador', 'Comprador']. Enviar no header Bearer o token JWT. </p>
            <p>
              Para visualizar um show específico utilizar o endpoint de /shows. ao selecionar o método GET /Shows/{ID}
              será retornado
              Status 200 com o show. Assim como o exemplo a seguir:
            <ul>
              <li>
                GET /shows/1
              </li>
            </ul>
            </p>
            <pre>
            <code class="html">
            {
              "id": 62,
              "titulo": "AC DC",
              "data": "2021-10-27T00:00:00",
              "detalheShows": [
                {
                "id": 477,
                "capacidade": 121,
                "valor": 1231,
                "showDisponivel": true,
                  "tipoIngresso": {
                    "id": 145,
                    "titulo": "CAMAROTE"
                  }
                }
              ]
            },
              </code>
            </pre>

            <h4 id="postshows">POST /Shows</h4>
            <p>Rota protegida ['Administrador']. Enviar no header Bearer o token JWT. </p>
            <p>Para cadastrar um novo show, utilizar o endpoint de /Shows, informar as
              propriedades Titulo e Data
            </p>
            <ul>
              <li>
                Titulo Precisa ser uma string.
              </li>
              <li>
                Data Tipo do campo Datetime utilizar como exemplo '2021-12-25'.
              </li>              
            </ul>
            Exemplo para criar um novo show:
            <pre>
            <code class="html">
          {
            "titulo": "Linkin Park",
            "data": "2021-11-22",
          }
              </code>
            </pre>
            Após validações será retornado um 200 com o show cadastrado com a seguinte estrutura:
            <pre>
            <code class="html">
            {
              "result": {
                "titulo": "Novo Show",
                "data": "2021-10-27T00:00:00"
              },
              "statusCode": 200,
              "message": "Operação realizada com sucesso."
            }
                        </code>
                      </pre>
           
            <h4 class="mt-5" id="putshows">PUT /Shows/{ID}</h4>
            <p>Rota protegida ['Administrador']. Enviar no header Bearer o token JWT. </p>
            <p>
              Para atualizar o show informar o ID do show a ser atualizado no parametro e as informações no body
            </p>
            <pre>
            <code class="html">
            {
              "titulo": "Linkin Park",
              "data": "2021-11-22"
            }
              </code>
            </pre>
            <li>
              Caso não existe o ID do show será retornado o STATUS 404.
            </li>
            <li>
              Caso de tudo OK será retornado o STATUS 200, com o seguinte response
            </li>
            
            <pre>
                <code class="html">
                {
                  "statusCode": 200,
                  "message": "Show atualizado com sucesso."
                }
                  </code>
            </pre>
            <h4 id="deleteshows">DELETE /Shows/{ID}</h4>
            <p>Rota protegida ['Administrador']. Enviar no header Bearer o token JWT. </p>
            <p>Para excluir o show, utilizar o endpoint de /shows. No método DELETE /shows/{ID} informar o ID do show
              que deseja
              cancelar, caso ok, será retornado um Status 200 confirmando a exclusão.
            <ul>
              <li>
                caso não exista o ingresso será retornado um STATUS 404.
              </li>
              <li>
                caso de tudo OK será retornado um STATUS 200.
              </li>
            </ul>
            </p>
          </section>

              <h4 class="mt-5" id="getdetalheshowid">GET /Shows/DetalheShow{ID}</h4>
              <p>
                Para visualizar os DetalhesShow dos Shows, será utilizado essa rota, nele será retornado todos os DetalheShows do show escolhido
              <ul>
                <li>
                  GET /Shows/DetalheShow/67
                </li>
              </ul>
              </p>
              <pre>
              <code class="html">
              [
                {
                  "id": 477,
                  "capacidade": 121,
                  "valor": 1231,
                  "showDisponivel": true,
                  "tipoIngresso": {
                    "id": 145,
                    "titulo": "CAMAROTE"
                  }
                }
              ]
                </code>
              </pre>

              <h4 id="postdetalheshow">POST /Shows/DetalheShow</h4>
              <p>Rota protegida ['Administrador']. Enviar no header Bearer o token JWT. </p>
              <p>Nese Endpoint é cadastrado os detalheShows dos shows, em específico o ingresso do mesmo</p>
              <ul>
                <li>
                  Capacidade do tipo INT.
                </li>
                <li>
                  Valor do tipo decimal exemplo 599.90 .
                </li>
                <li>tipoIngressoId do tipo INT</li>
                <li>showID do tipo INT</li>
              </ul>
              Exemplo para criar um novo detalheShow:
              <pre>
                          <code class="html">
                        {
                          "capacidade": 50,
                          "valor": 299.50,
                          "tipoIngressoId": 2,
                          "showID": 9
                        }
                            </code>
                          </pre>
              Após validações será retornado um 200 com o detalheshow cadastrado com a seguinte estrutura:
              <pre>
                          <code class="html">
                          {
                            "result": {
                              "id": 480,
                              "capacidade": 10,
                              "valor": 129.9,
                              "showDisponivel": true,
                            },
                            "statusCode": 200,
                            "message": "Operação realizada com sucesso."
                          }
                                      </code>
                                    </pre>
          <hr class="divider">

          <!-- Endpoint Relatórios            
		============================ -->
          <section id="relatorios">
            <p>Rota protegida ['Administrador', 'Comprador']. Enviar no header Bearer o token JWT. </p>
            <h2>Relatórios</h2>
            <p>
              No Endpoint de relatórios, será utilizado apenas o método POST /Relatorios.
            </p>

            <h4 id="getrelatorios">POST /Relatorios</h4>
            <p>No body da requisição é possível filtrar por Pessoa e/ou shows ou tudo.</p>

            <li>Campo <b>pessoa</b> do tipo string</li>
            <li>Campo <b>show</b> do tipo string</li>
            <pre>
              <code>
                {
                  "pessoa": "string",
                  "show": "string"
                }
              </code>
            </pre>
            <p>Nele será gerado a listagem em planilha com o filtro desejado, caso envie os filtros em brancos, será retornado todos os shows. sendo:</p>
            <li>Usuário Administrador vai ser retornado as compras de todos os usuários.</li>
            <li>Usuário Comprador somente as compras realizadas.</li>

            <hr class="divider">

            <!-- Tecnologias
		============================ -->
            <section id="Tecnologias">
              <h2>Tecnologias Utilizadas</h2>
              <ul>
                <li>Asp.Net Core API WEB 3.1</li>
                <li>Banco de dados em SQLite</li>
                <li>Entity Framework Core 3.1</li>
              </ul>
            </section>

            <hr class="divider">

            <section id="diagramamer">
              <h2>Diagrama do banco de dados</h2>
              <div class="row">
                <div class="col-lg-6">
                  <p><a class="popup-img" href="assets/merlogico.jpeg"><img class="img-fluid border"
                        src="assets/merlogico.jpeg" alt=""></a></p>
                </div>
              </div>
            </section>
		     <section id="fluxograma">
              <h2>Fluxogramas Macro</h2>
              <h4>Processo Macro Ingressos</h4>
              <div class="row">
                <div class="col-lg-6">
                  <p><a class="popup-img" href="assets/endingressos.jpeg"><img class="img-fluid border" src="assets/endingressos.jpeg"
                        alt=""></a></p>
                </div>
              </div>
              <h4>Processo Macro Shows</h4>
              <div class="row">
                <div class="col-lg-6">
                  <p><a class="popup-img" href="assets/endshows.jpeg"><img class="img-fluid border" src="assets/endshows.jpeg"
                        alt=""></a></p>
                </div>
              </div>
              <h4>Processo Macro Relatórios</h4>
              <div class="row">
                <div class="col-lg-6">
                  <p><a class="popup-img" href="assets/endrelatorio.jpeg"><img class="img-fluid border" src="assets/endrelatorio.jpeg"
                        alt=""></a></p>
                </div>
              </div>
            </section>
            <!-- JavaScript
============================ -->
            <script src="assets/vendor/jquery/jquery.min.js"></script>
            <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
            <!-- Highlight JS -->
            <script src="assets/vendor/highlight.js/highlight.min.js"></script>
            <!-- Easing -->
            <script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script>
            <!-- Magnific Popup -->
            <script src="assets/vendor/magnific-popup/jquery.magnific-popup.min.js"></script>
            <!-- Custom Script -->
            <script src="assets/js/theme.js"></script>
</body>

</html>
